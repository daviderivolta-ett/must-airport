<div class="card" #card>
    <div class="img-container">
        @if (childReport.fields.detailShots && childReport.fields.detailShots.length !== 0) {
            <img src="{{childReport.fields.detailShots[0]}}" alt="Immagine del report">
        }
    </div>
    <div class="card-body">
        <div class="card-details">
            <div class="info">
                <span class="info-title">Segnale di guasto: </span>
                @if (childReport.fields.childFlowTags1.length === 0) {
                <span class="info-value">-</span>
                }
                @else {
                    @for (failureTag of childReport.fields.childFlowTags1; track $index; let last = $last) {
                    <span class="info-value" [ngClass]="{'comma': !last}">{{failureTag.name}}</span>
                    }
                }
            </div>
            <div class="info">
                <span class="info-title">Modo di guasto: </span>
                @if (childReport.fields.childFlowTags2.length === 0) {
                <span class="info-value">-</span>
                }
                @else {
                    @for (failureSubTag of childReport.fields.childFlowTags2; track $index; let last = $last) {
                    <span class="info-value" [ngClass]="{'comma': !last}">{{failureSubTag.name}}</span>
                    }
                }
            </div>
            <div class="info">
                <span class="info-title">Commento: </span>
                <span class="info-value">{{childReport.fields.description}}</span>
            </div>
        </div>
        <div class="card-footer">
            <p class="date">{{childReport.creationTime | date: 'dd/MM/yyyy'}} - h:{{childReport.creationTime | date: 'HH:mm'}}</p>
            @if (showDeleteBtn && parentReport.childrenIds.length > 1) {
                @if (loggedUser && (loggedUser.level === 0 || loggedUser.level === 1)) {
                <div class="icon-wrapper" (click)="iconClick()">
                    <span class="material-symbols-outlined delete">delete</span>
                </div>
                }
            }
        </div>
    </div>
</div>